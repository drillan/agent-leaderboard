<div class="performance-tab">
    <h2>ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹</h2>

    <p style="color: #666; margin-bottom: 1.5rem;">è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã«ãŠã‘ã‚‹ã€å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åˆ†æã—ã¾ã™ã€‚</p>

    <!-- ã‚¿ã‚¹ã‚¯é¸æŠ -->
    <div class="task-selector">
        <label for="task-filter">ã‚¿ã‚¹ã‚¯é¸æŠ:</label>
        <select id="task-filter"
                name="task_id"
                hx-get="/performance/charts"
                hx-target="#charts-container"
                hx-include="this">
            <option value="all">å…¨ã‚¿ã‚¹ã‚¯</option>
            <!-- å®Ÿéš›ã®ã‚¿ã‚¹ã‚¯ã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾— -->
        </select>
    </div>

    <!-- ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="charts-container"
         hx-get="/performance/charts?task_id=all"
         hx-trigger="load"
         hx-swap="innerHTML">
        <div class="placeholder">
            <p>ãƒãƒ£ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
            <div class="loading" style="margin: 1rem auto;"></div>
        </div>
    </div>

    <!-- ãƒ¡ãƒˆãƒªã‚¯ã‚¹çµ±è¨ˆ -->
    <div class="card" style="margin-top: 2rem;">
        <h3>ğŸ“ˆ çµ±è¨ˆæƒ…å ±</h3>
        <div id="stats-container" hx-get="/performance/stats?task_id=all" hx-trigger="load" hx-swap="innerHTML">
            <p class="placeholder">çµ±è¨ˆæƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
    </div>
</div>

<script>
    // ã‚¿ã‚¹ã‚¯é¸æŠãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ã€ãƒãƒ£ãƒ¼ãƒˆã‚’å†èª­ã¿è¾¼ã¿
    document.getElementById('task-filter').addEventListener('change', function() {
        const taskId = this.value;
        htmx.ajax('GET', `/performance/charts?task_id=${taskId}`, '#charts-container');
        htmx.ajax('GET', `/performance/stats?task_id=${taskId}`, '#stats-container');
    });
</script>

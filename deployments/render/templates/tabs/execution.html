<div class="execution-tab">
    <h2>🚀 タスク実行</h2>

    <!-- ヘルプテキスト -->
    <div class="card" style="background: #d1ecf1; border-left: 4px solid #17a2b8; color: #0c5460;">
        <p style="margin: 0;">💡 <strong>タスクを入力してください:</strong> 複数のAIエージェントがタスクに取り組み、パフォーマンスを競い合います。</p>
    </div>

    <!-- 利用可能なツール -->
    <div class="card" style="background: #fff3cd; border-left: 4px solid #ffc107; color: #856404;">
        <h3 style="margin-top: 0; margin-bottom: 1rem; color: #856404;">🛠️ 利用可能なツール</h3>
        <p style="margin-bottom: 1rem; color: #856404;">エージェントは以下の3つのツールを使用できます:</p>
        <ol style="color: #856404; margin: 0; padding-left: 1.5rem;">
            <li><strong>get_datetime</strong> - 現在の日付と時刻を取得 (ISO 8601形式)</li>
            <li><strong>check_prime</strong> - 数値が素数かどうかを判定</li>
            <li><strong>check_palindrome</strong> - テキストが回文かどうかをチェック (大文字小文字を区別しない)</li>
        </ol>
    </div>

    <!-- タスク入力フォーム -->
    <div class="card">
        <h3>新しいタスクを実行</h3>
        <form class="task-form"
              hx-post="/execute"
              hx-target="#results"
              hx-swap="innerHTML"
              hx-on="htmx:xhr:loadstart: htmx.addClass('#status-display', 'htmx-settling')"
              hx-on="htmx:xhr:loadstart: htmx.removeClass('#status-display', 'hidden')">

            <input type="text"
                   name="task"
                   placeholder="例: 17が素数かどうか判定してください"
                   required
                   maxlength="10000"
                   autocomplete="off">

            <button type="submit">
                実行開始 🚀
                <span class="htmx-indicator loading"></span>
            </button>
        </form>
    </div>

    <!-- 実行状態表示 -->
    <div id="status-display" class="card hidden" style="display: none;">
        <h3>実行中...</h3>
        <div style="text-align: center; padding: 2rem;">
            <div class="loading" style="margin: 1rem auto; width: 40px; height: 40px; border-width: 4px;"></div>
            <p style="color: #666; margin-top: 1rem;">複数のエージェントがタスクに取り組んでいます...</p>
        </div>
    </div>

    <!-- エラーメッセージ表示エリア -->
    <div id="error-display" class="card hidden" style="display: none;">
        <!-- htmxエラーが表示されます -->
    </div>

    <!-- 結果表示 -->
    <div id="results" class="card" style="display: none;">
        <h3>📊 評価結果</h3>
        <div id="results-content"></div>

        <!-- リーダーボード表示エリア -->
        <div id="leaderboard-section" style="margin-top: 2rem;"></div>

        <!-- 実行詳細表示エリア -->
        <div id="execution-details-section" style="margin-top: 2rem;"></div>
    </div>
</div>


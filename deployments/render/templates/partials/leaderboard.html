<div class="leaderboard">
    <h2>ğŸ† ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰</h2>

    <table>
        <thead>
            <tr>
                <th>é †ä½</th>
                <th>ãƒ¢ãƒ‡ãƒ«</th>
                <th>ã‚¹ã‚³ã‚¢</th>
                <th>å®Ÿè¡Œæ™‚é–“</th>
                <th>èª¬æ˜</th>
                <th>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
            <tr>
                <td><strong>{{ loop.index }}</strong></td>
                <td>{{ result.model }}</td>
                <td>
                    <strong style="font-size: 1.2em; color: #0066cc;">
                        {{ result.score }}
                    </strong>/100
                </td>
                <td>{{ "%.2f"|format(result.duration) }}s</td>
                <td style="max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                    {{ result.explanation[:100] }}...
                </td>
                <td>
                    {% if result.execution_id %}
                    <button type="button"
                            hx-get="/execution/{{ result.execution_id }}/detail"
                            hx-target="#modal .modal-content"
                            hx-swap="innerHTML"
                            style="padding: 0.5rem 1rem; background: #f0f0f0; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;">
                        ğŸ‘ï¸ è©³ç´°
                    </button>
                    {% else %}
                    <span style="color: #999; font-size: 0.9em;">-</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- ãƒãƒ£ãƒ¼ãƒˆã‚’å‹•çš„ã«èª­ã¿è¾¼ã¿ -->
    {% if execution_id %}
    <div hx-get="/chart/{{ execution_id }}"
         hx-trigger="load"
         hx-swap="innerHTML"
         id="chart-container"
         style="margin-top: 2rem;">
        <p style="text-align: center; color: #666;">
            ãƒãƒ£ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã¿ä¸­...
        </p>
    </div>
    {% endif %}
</div>

<div class="execution-tab">
    <h2>ğŸš€ ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ</h2>

    <!-- ã‚¿ã‚¹ã‚¯å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
    <div class="card">
        <h3>æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ</h3>
        <form class="task-form" hx-post="/execute" hx-target="#results" hx-swap="innerHTML">
            <input type="text"
                   name="task"
                   placeholder="ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼š17ãŒç´ æ•°ã‹ã©ã†ã‹åˆ¤å®šã—ã¦ãã ã•ã„ï¼‰"
                   required
                   maxlength="10000">
            <button type="submit">å®Ÿè¡Œé–‹å§‹ ğŸš€</button>
            <span class="htmx-indicator loading"></span>
        </form>
    </div>

    <!-- å®Ÿè¡ŒçŠ¶æ…‹è¡¨ç¤º -->
    <div id="status-display" class="card" style="display: none;">
        <h3>å®Ÿè¡Œä¸­...</h3>
        <div id="status-content"></div>
    </div>

    <!-- çµæœè¡¨ç¤º -->
    <div id="results" class="card" style="display: none;">
        <h3>è©•ä¾¡çµæœ</h3>
        <div id="results-content"></div>
    </div>
</div>

<script>
    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã«å®Ÿè¡ŒçŠ¶æ…‹ã‚’è¡¨ç¤º
    document.addEventListener('htmx:xhr:loadstart', function(evt) {
        if (evt.detail.xhr.requestTarget.name === 'task') {
            document.getElementById('status-display').style.display = 'block';
        }
    });

    // çµæœå–å¾—å¾Œã«å®Ÿè¡ŒçŠ¶æ…‹ã‚’éè¡¨ç¤º
    document.addEventListener('htmx:afterSwap', function(evt) {
        if (evt.detail.target.id === 'results') {
            document.getElementById('status-display').style.display = 'none';
            document.getElementById('results').style.display = 'block';
        }
    });
</script>
